\hypertarget{classstefanfrings_1_1_http_response}{}\section{stefanfrings\+:\+:Http\+Response Class Reference}
\label{classstefanfrings_1_1_http_response}\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}


{\ttfamily \#include $<$httpresponse.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classstefanfrings_1_1_http_response_a97dd17f92a23d9725330978e32cec8d5}{Http\+Response}} (Q\+Tcp\+Socket $\ast$socket)
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_a41029ee24e05e419e6da7ea970bc3724}{set\+Header}} (Q\+Byte\+Array name, Q\+Byte\+Array value)
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_ae725069b38ab629f33c9bb6391b4c064}{set\+Header}} (Q\+Byte\+Array name, int value)
\item 
Q\+Map$<$ Q\+Byte\+Array, Q\+Byte\+Array $>$ \& \mbox{\hyperlink{classstefanfrings_1_1_http_response_aade61e2cccc871b06e7a3df86bf15d69}{get\+Headers}} ()
\item 
Q\+Map$<$ Q\+Byte\+Array, \mbox{\hyperlink{classstefanfrings_1_1_http_cookie}{Http\+Cookie}} $>$ \& \mbox{\hyperlink{classstefanfrings_1_1_http_response_a1bcd416f520020e944900e35ab51864c}{get\+Cookies}} ()
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_a07af281f6437c377e6f729051ce4e13c}{set\+Status}} (int status\+Code, Q\+Byte\+Array description=Q\+Byte\+Array())
\item 
int \mbox{\hyperlink{classstefanfrings_1_1_http_response_a3b73cdd0d5139fb33b9713f6035c2d27}{get\+Status\+Code}} () const
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write}} (Q\+Byte\+Array data, bool last\+Part=false)
\item 
bool \mbox{\hyperlink{classstefanfrings_1_1_http_response_a0036711cc0e5273754cdf3fc3dcd2b0e}{has\+Sent\+Last\+Part}} () const
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_ac32c7fcc332d3f834ec88ae06b2e7d63}{set\+Cookie}} (const \mbox{\hyperlink{classstefanfrings_1_1_http_cookie}{Http\+Cookie}} \&cookie)
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_afb4d442dd120b515d472aff13074275a}{redirect}} (const Q\+Byte\+Array \&url)
\item 
void \mbox{\hyperlink{classstefanfrings_1_1_http_response_a0d50597cae5e04e6b2110df589c6617e}{flush}} ()
\item 
bool \mbox{\hyperlink{classstefanfrings_1_1_http_response_a1869ed834437286ba88ab72027d12463}{is\+Connected}} () const
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This object represents a H\+T\+TP response, used to return something to the web client. 

{\ttfamily 
\begin{DoxyPre}
  response.setStatus(200,"OK"); // optional, because this is the default
  response.writeBody("Hello");
  response.writeBody("World!",true);
\end{DoxyPre}
} 

Example how to return an error\+: {\ttfamily 
\begin{DoxyPre}
  response.setStatus(500,"server error");
  response.write("The request cannot be processed because the servers is broken",true);
\end{DoxyPre}
} 

In case of large responses (e.\+g. file downloads), a Content-\/\+Length header should be set before calling \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. Web Browsers use that information to display a progress bar. 

Definition at line 36 of file httpresponse.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a97dd17f92a23d9725330978e32cec8d5}\label{classstefanfrings_1_1_http_response_a97dd17f92a23d9725330978e32cec8d5}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!Http\+Response@{Http\+Response}}
\index{Http\+Response@{Http\+Response}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{Http\+Response()}{HttpResponse()}}
{\footnotesize\ttfamily Http\+Response\+::\+Http\+Response (\begin{DoxyParamCaption}\item[{Q\+Tcp\+Socket $\ast$}]{socket }\end{DoxyParamCaption})}

Constructor. 
\begin{DoxyParams}{Parameters}
{\em socket} & used to write the response \\
\hline
\end{DoxyParams}


Definition at line 10 of file httpresponse.\+cpp.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a0d50597cae5e04e6b2110df589c6617e}\label{classstefanfrings_1_1_http_response_a0d50597cae5e04e6b2110df589c6617e}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!flush@{flush}}
\index{flush@{flush}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{flush()}{flush()}}
{\footnotesize\ttfamily void Http\+Response\+::flush (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Flush the output buffer (of the underlying socket). You normally don\textquotesingle{}t need to call this method because flush is automatically called after \mbox{\hyperlink{classstefanfrings_1_1_http_request_handler_a0a7210907152c46b8b5a47feb64cf6bd}{Http\+Request\+Handler\+::service()}} returns. 

Definition at line 191 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a1bcd416f520020e944900e35ab51864c}\label{classstefanfrings_1_1_http_response_a1bcd416f520020e944900e35ab51864c}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!get\+Cookies@{get\+Cookies}}
\index{get\+Cookies@{get\+Cookies}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{get\+Cookies()}{getCookies()}}
{\footnotesize\ttfamily Q\+Map$<$ Q\+Byte\+Array, \mbox{\hyperlink{classstefanfrings_1_1_http_cookie}{Http\+Cookie}} $>$ \& Http\+Response\+::get\+Cookies (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the map of cookies 

Definition at line 177 of file httpresponse.\+cpp.

Here is the caller graph for this function\+:
% FIG 0
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_aade61e2cccc871b06e7a3df86bf15d69}\label{classstefanfrings_1_1_http_response_aade61e2cccc871b06e7a3df86bf15d69}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!get\+Headers@{get\+Headers}}
\index{get\+Headers@{get\+Headers}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{get\+Headers()}{getHeaders()}}
{\footnotesize\ttfamily Q\+Map$<$ Q\+Byte\+Array, Q\+Byte\+Array $>$ \& Http\+Response\+::get\+Headers (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Get the map of H\+T\+TP response headers 

Definition at line 32 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a3b73cdd0d5139fb33b9713f6035c2d27}\label{classstefanfrings_1_1_http_response_a3b73cdd0d5139fb33b9713f6035c2d27}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!get\+Status\+Code@{get\+Status\+Code}}
\index{get\+Status\+Code@{get\+Status\+Code}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{get\+Status\+Code()}{getStatusCode()}}
{\footnotesize\ttfamily int Http\+Response\+::get\+Status\+Code (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Return the status code. 

Definition at line 43 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a0036711cc0e5273754cdf3fc3dcd2b0e}\label{classstefanfrings_1_1_http_response_a0036711cc0e5273754cdf3fc3dcd2b0e}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!has\+Sent\+Last\+Part@{has\+Sent\+Last\+Part}}
\index{has\+Sent\+Last\+Part@{has\+Sent\+Last\+Part}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{has\+Sent\+Last\+Part()}{hasSentLastPart()}}
{\footnotesize\ttfamily bool Http\+Response\+::has\+Sent\+Last\+Part (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Indicates whether the body has been sent completely (\mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}} has been called with last\+Part=true). 

Definition at line 161 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a1869ed834437286ba88ab72027d12463}\label{classstefanfrings_1_1_http_response_a1869ed834437286ba88ab72027d12463}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!is\+Connected@{is\+Connected}}
\index{is\+Connected@{is\+Connected}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{is\+Connected()}{isConnected()}}
{\footnotesize\ttfamily bool Http\+Response\+::is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

May be used to check whether the connection to the web client has been lost. This might be useful to cancel the generation of large or slow responses. 

Definition at line 197 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_afb4d442dd120b515d472aff13074275a}\label{classstefanfrings_1_1_http_response_afb4d442dd120b515d472aff13074275a}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!redirect@{redirect}}
\index{redirect@{redirect}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{redirect()}{redirect()}}
{\footnotesize\ttfamily void Http\+Response\+::redirect (\begin{DoxyParamCaption}\item[{const Q\+Byte\+Array \&}]{url }\end{DoxyParamCaption})}

Send a redirect response to the browser. Cannot be combined with \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. 
\begin{DoxyParams}{Parameters}
{\em url} & Destination U\+RL \\
\hline
\end{DoxyParams}


Definition at line 183 of file httpresponse.\+cpp.

Here is the call graph for this function\+:
% FIG 1
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_ac32c7fcc332d3f834ec88ae06b2e7d63}\label{classstefanfrings_1_1_http_response_ac32c7fcc332d3f834ec88ae06b2e7d63}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!set\+Cookie@{set\+Cookie}}
\index{set\+Cookie@{set\+Cookie}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{set\+Cookie()}{setCookie()}}
{\footnotesize\ttfamily void Http\+Response\+::set\+Cookie (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classstefanfrings_1_1_http_cookie}{Http\+Cookie}} \&}]{cookie }\end{DoxyParamCaption})}

Set a cookie. You must call this method before the first \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. 

Definition at line 167 of file httpresponse.\+cpp.

Here is the call graph for this function\+:
% FIG 2
Here is the caller graph for this function\+:
% FIG 3
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a41029ee24e05e419e6da7ea970bc3724}\label{classstefanfrings_1_1_http_response_a41029ee24e05e419e6da7ea970bc3724}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!set\+Header@{set\+Header}}
\index{set\+Header@{set\+Header}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{set\+Header()}{setHeader()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Http\+Response\+::set\+Header (\begin{DoxyParamCaption}\item[{Q\+Byte\+Array}]{name,  }\item[{Q\+Byte\+Array}]{value }\end{DoxyParamCaption})}

Set a H\+T\+TP response header. You must call this method before the first \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. 
\begin{DoxyParams}{Parameters}
{\em name} & name of the header \\
\hline
{\em value} & value of the header \\
\hline
\end{DoxyParams}


Definition at line 20 of file httpresponse.\+cpp.

Here is the caller graph for this function\+:
% FIG 4
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_ae725069b38ab629f33c9bb6391b4c064}\label{classstefanfrings_1_1_http_response_ae725069b38ab629f33c9bb6391b4c064}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!set\+Header@{set\+Header}}
\index{set\+Header@{set\+Header}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{set\+Header()}{setHeader()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Http\+Response\+::set\+Header (\begin{DoxyParamCaption}\item[{Q\+Byte\+Array}]{name,  }\item[{int}]{value }\end{DoxyParamCaption})}

Set a H\+T\+TP response header. You must call this method before the first \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. 
\begin{DoxyParams}{Parameters}
{\em name} & name of the header \\
\hline
{\em value} & value of the header \\
\hline
\end{DoxyParams}


Definition at line 26 of file httpresponse.\+cpp.

\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a07af281f6437c377e6f729051ce4e13c}\label{classstefanfrings_1_1_http_response_a07af281f6437c377e6f729051ce4e13c}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!set\+Status@{set\+Status}}
\index{set\+Status@{set\+Status}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{set\+Status()}{setStatus()}}
{\footnotesize\ttfamily void Http\+Response\+::set\+Status (\begin{DoxyParamCaption}\item[{int}]{status\+Code,  }\item[{Q\+Byte\+Array}]{description = {\ttfamily QByteArray()} }\end{DoxyParamCaption})}

Set status code and description. The default is 200,OK. You must call this method before the first \mbox{\hyperlink{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}{write()}}. 

Definition at line 37 of file httpresponse.\+cpp.

Here is the caller graph for this function\+:
% FIG 5
\mbox{\Hypertarget{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}\label{classstefanfrings_1_1_http_response_a6e49919cc568835ca6d81fec02533260}} 
\index{stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}!write@{write}}
\index{write@{write}!stefanfrings\+::\+Http\+Response@{stefanfrings\+::\+Http\+Response}}
\subsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void Http\+Response\+::write (\begin{DoxyParamCaption}\item[{Q\+Byte\+Array}]{data,  }\item[{bool}]{last\+Part = {\ttfamily false} }\end{DoxyParamCaption})}

Write body data to the socket. 

The H\+T\+TP status line, headers and cookies are sent automatically before the body. 

If the response contains only a single chunk (indicated by last\+Part=true), then a Content-\/\+Length header is automatically set. 

Chunked mode is automatically selected if there is no Content-\/\+Length header and also no \mbox{\hyperlink{struct_connection}{Connection}}\+:close header. 
\begin{DoxyParams}{Parameters}
{\em data} & Data bytes of the body \\
\hline
{\em last\+Part} & Indicates that this is the last chunk of data and flushes the output buffer. \\
\hline
\end{DoxyParams}


Definition at line 98 of file httpresponse.\+cpp.

Here is the caller graph for this function\+:
% FIG 6


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
prerequisites/\+Qt\+Web\+App/\+Qt\+Web\+App/httpserver/\mbox{\hyperlink{httpresponse_8h}{httpresponse.\+h}}\item 
prerequisites/\+Qt\+Web\+App/\+Qt\+Web\+App/httpserver/\mbox{\hyperlink{httpresponse_8cpp}{httpresponse.\+cpp}}\end{DoxyCompactItemize}
